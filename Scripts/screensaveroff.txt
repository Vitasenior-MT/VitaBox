#!/bin/bash

NOBLANK="
@xset s noblank
@xset s off
@xset -dpms
"

  # Pretty ANSI text colors
  OFF="\033[0m"
  BOLD="\033[1m"
  DIM="\033[2m"
  RED="\033[1;31m"
  GREEN="\033[1;32m"
  YELLOW="\033[1;33m"
  BLUE="\033[1;34m"

  clear
  echo "\n\n\t $YELLOW           "; date ; echo "$OFF"
  echo "\n $GREEN"
  echo "\t +------------------------------------------------+\n"
  echo "\t |                  no_blank.sh                   |\n"
  echo "\t |                rev Oct 1, 2013                 |\n"
  echo "\t |                                                |\n"
  echo "\t |  by: Jan Zumwalt - net-wrench.com              |\n"
  echo "\t |                                                |\n"
  echo "\t |  This script permanently disables the xsession |\n"
  echo "\t |  screen saver for RASPBIAN PI OS. It allows    |\n"
  echo "\t |  the user to abort before any change is made.  |\n"
  echo "\t +------------------------------------------------+$OFF\n\n"

  echo "\t This program will disable your xsession\n"
  echo "\t screen saver permanently, is this what \n"
  #echo "\t you really want to do? $YELLOW<y/n>$OFF"; read -n 1 KEYIN

  #if [[ $KEYIN == "N"  ||  $KEYIN == "n" ]]; then
  #  echo "\n\n\t OK, I quit and did not do anything.\n\n"
  #  exit 0
  #fi

  echo "\n\n\t I intend to modify your current \n"
  echo "\t /etc/xdg/lxsession/LXDE/autostart \n"
  echo "\t I will add the$GREEN GREEN$OFF lines to the file...\n\n"

  echo "$DIM\n"
  pr -t -o 9 /etc/xdg/lxsession/LXDE/autostart
  echo "$OFF$GREEN$NOBLANK" | pr -t -o 9
  echo "$OFF\n\n" 

  #echo "\t Is this really what you want to do? $YELLOW<y/n>$OFF"; read -n 1 KEYIN

  #if [[ $KEYIN == "N"  ||  $KEYIN == "n" ]]; then
  #  echo "\n\n\t OK, I quit and did not do anything.\n\n"
  #  exit 0
  #fi

  #cat /etc/xdg/lxsession/LXDE/autostart > /etc/xdg/lxsession/LXDE/autostart.`date +%m-%d-%Y_%I:%M:%S`
  echo "\n\t Created backup copy of the autostart file...\n"
  sudo echo "$NOBLANK" >> /etc/xdg/lxsession/LXDE/autostart

  echo "\t Your new file looks like this\n"
  echo "$DIM\n"
  pr -t -o 9 /etc/xdg/lxsession/LXDE/autostart
  echo "$OFF\n\n"

  echo "\t$RED Modified file. Screensaver is now disabled.$OFF\n"

  # required so xterm will not close
  echo "\n\t press any key to exit: "; read -n 1 KEYIN
  echo "\t$GREEN Program ended normaly $OFF\n\n"